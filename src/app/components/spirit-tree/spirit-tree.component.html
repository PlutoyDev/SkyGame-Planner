<div class="content sky-border-solid" [class.highlight]="highlight">
  <div class="spirit-tree-scroll" [class.pad-bottom]="hasCostAtRoot">
    <div class="tree-action find-item" [ngbTooltip]="'Go to item'" container="body" (click)="toggleNavigate()" [class.attention]="navigating">
      <mat-icon>step_into</mat-icon>
    </div>
    <div class="tree-action unlock-all" (click)="unlockAll()" [ngbTooltip]="'Toggle all'" container="body" placement="bottom-end">
      <mat-icon>lock_open</mat-icon>
    </div>
    <div class="spirit-tree">
      <div class="column left">
        <div class="st-item" *ngFor="let node of left">
          <app-node *ngIf="node" [node]="node"  [action]="nodeAction" [position]="'left'" [highlight]="highlightItem ? (node.item?.guid === highlightItem || node === hiddenItems[highlightItem]) : undefined"></app-node>
          <!-- For now left nodes only go up. -->
          <div *ngIf="node?.n" class="arrow arrow-up"></div>
        </div>
      </div>
      <div class="column center">
        <div class="st-item" *ngFor="let node of center">
          <app-node *ngIf="node" [node]="node" [action]="nodeAction" [position]="'center'" [highlight]="highlightItem ? (node.item?.guid === highlightItem || node === hiddenItems[highlightItem]) : undefined"></app-node>
          <!-- Center node arrows -->
          <div *ngIf="node?.nw" class="arrow arrow-left"></div>
          <div *ngIf="node?.n" class="arrow arrow-up"></div>
          <div *ngIf="node?.ne" class="arrow arrow-right"></div>
        </div>
      </div>
      <div class="column right">
        <div class="st-item" *ngFor="let node of right">
          <app-node *ngIf="node" [node]="node" [action]="nodeAction" [position]="'right'" [highlight]="highlightItem ? (node.item?.guid === highlightItem || node === hiddenItems[highlightItem]) : undefined"></app-node>
          <!-- For now right nodes only go up. -->
          <div *ngIf="node?.n" class="arrow arrow-up"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div *ngIf="name" class="name">
      <ng-content select="div[name]"></ng-content>
      <div class="name-default">
        {{ name }}
        <span *ngIf="tsDate" class="c-accent ts-date">(<app-date [date]="tsDate"></app-date>)</span>
        <span *ngIf="rsDate" class="c-accent ts-date">(<app-date [date]="rsDate"></app-date>)</span>
      </div>
    </div>
    <div *ngIf="name && hasCost" class="hr"></div>
    <div *ngIf="hasCost" class="costs">
      <app-cost [cost]="totalCost" [remaining]="remainingCost"></app-cost>
  </div>
</div>
