<h1 class="h2">Spirit</h1>

<div class="card-wrapper mt-2">
  <h2 class="h3 mb-0">{{ spirit.name }}</h2>
  <!-- Wiki link -->
  <div *ngIf="spirit._wiki?.href" class="wiki">
    <a [href]="spirit._wiki!.href" target="_blank">
      <mat-icon fontIcon="question_mark"></mat-icon>
    </a>
  </div>
</div>

<!-- Spirit image -->
<div class="card-container mt-2">
  <div class="card-container-inner spirit-img">
    <img *ngIf="spirit.imageUrl" [src]="spirit.imageUrl" [alt]="spirit.name" />
  </div>
</div>

<div class="card-container mt-2">
  <div class="card-container-inner">
    <!-- Added tree-->
    <div *ngIf="tree" class="tree-wrapper p-inline-block">
      <app-spirit-tree [tree]="tree" [name]="'Spirit tree'" [highlight]="false"></app-spirit-tree>
    </div>
    <!-- Spirit tree -->
    <div class="tree-wrapper p-inline-block">
      <app-spirit-tree *ngIf="spirit.tree"
        [tree]="spirit.tree" [name]="'Spirit tree'"
        [highlight]="highlightTree === spirit.tree.guid"></app-spirit-tree>
    </div>
    <!-- Traveling Spirit trees -->
    <ng-container *ngIf="spirit.ts">
      <ng-container *ngFor="let ts of spirit.ts; let ti = index;">
        <div class="tree-wrapper p-inline-block">
          <app-spirit-tree
            [tree]="ts.tree" [name]="'Traveling Spirit #' + ts.number"
            [highlight]="highlightTree === ts.tree.guid"></app-spirit-tree>
        </div>
      </ng-container>
    </ng-container>
    <!-- Visits -->
    <ng-container *ngIf="spirit.returns">
      <ng-container *ngFor="let visit of spirit.returns; let vi = index;">
        <div class="tree-wrapper p-inline-block">
          <app-spirit-tree
            [tree]="visit.tree" [name]="visit.return.name || 'Visit #' + (vi+1)"
            [highlight]="highlightTree === visit.tree.guid"></app-spirit-tree>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
